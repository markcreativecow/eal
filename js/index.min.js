function generateCalendar(e){function u(){s.html(i.getMonthName());o.html(i.getYear())}function a(){$(".custom-content").remove()}function f(e){a();$("#busy").show();setTimeout(function(){$("#busy").hide();var n=$('<div class="custom-content">'+e.html()+"</div>").insertAfter(t);setTimeout(function(){scroll.refresh();setTimeout(function(){var e=$("#custom-inner").height();scroll.scrollTo(0,-e)},0)},500)},0)}var t=$("#custom-inner"),n=$("#custom-content-reveal"),r=$("#calendar"),i=r.calendario({onDayClick:function(e,t){if(t.length){f(t)}},caldata:e,displayWeekAbbr:true}),s=$("#custom-month").html(i.getMonthName()),o=$("#custom-year").html(i.getYear());$("#calendar").swipe({swipeLeft:function(e,t,n,r,s){i.gotoNextMonth(u);a();setTimeout(function(){scroll.refresh()},0)},swipeRight:function(e,t,n,r,s){i.gotoPreviousMonth(u);a();setTimeout(function(){scroll.refresh()},0)},threshold:0});$("#custom-next").on("touchstart",function(){a();i.gotoNextMonth(u);setTimeout(function(){scroll.refresh()},0)});$("#custom-prev").on("touchstart",function(){a();i.gotoPreviousMonth(u);setTimeout(function(){scroll.refresh()},0)})}function getEventsList(){$("#busy").show();$.getJSON(serviceURL+"api/rest/events/format/json",function(e){$("#busy").hide();$.each(e,function(e,t){var n=moment.unix(t.from).format("MM-DD-YYYY");var r='<div class="custom-event"><h4>Event Details:</h4><p class="custom-location"><span>Location:</span> '+t.name+"</p>"+'<p class="custom-date"><sp an>Date:</span> '+moment.unix(t.from).format("Do MMMM YYYY")+"</p>"+'<p class="custom-time"><span>Time:</span> '+moment.unix(t.from).format("HH:mm")+" - "+moment.unix(t.to).format("HH:mm")+"</p>"+'<p class="custom-description"><span>Event Description:</span> '+t.description+"</p></div>"+'<a href="#" onclick="window.open(\''+t.link+"','_system','location=yes');\" class=\"btn\" id=\"btn-register\">Register</a>"+'<div class="clearfix"></div>';if(events[n]){events[n]=events[n]+r}else{events[n]=r}});generateCalendar(events);setTimeout(function(){scroll.refresh()})})}var serviceURL=localStorage["serviceURL"];$(window).load(function(){setTimeout(getEventsList,100)});$(document).ajaxError(function(e,t,n){$("#busy").hide();alert("Error accessing the server")});var item;var events={}